<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<title>Drink System</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #000;
  color: #fff;
  text-align: center;
}

h1 {
  font-size: 20px;
  margin: 20px 0;
}

.drink {
  margin: 18px auto;
}

button {
  width: 80%;
  padding: 12px;
  font-size: 16px;
  background: #1db954;
  border: none;
  color: #000;
  margin-bottom: 6px;
}

.info {
  font-size: 14px;
  color: #ccc;
}

/* ADMIN IN FONDO */
#adminMenu {
  margin-top: 120px;
  padding: 15px;
  background: #111;
}

#adminMenu input, #adminMenu select {
  width: 80%;
  padding: 8px;
  margin-bottom: 8px;
  font-size: 14px;
}

#adminMenu button {
  background: #ff5252;
  color: #000;
}
</style>
</head>

<body>

<h1>Bevande disponibili</h1>

<div class="drink">
  <button onclick="eroga('monster')">Monster</button>
  <div class="info" id="monsterInfo"></div>
</div>

<div class="drink">
  <button onclick="eroga('coca')">Coca-Cola</button>
  <div class="info" id="cocaInfo"></div>
</div>

<div class="drink">
  <button onclick="eroga('fanta')">Fanta</button>
  <div class="info" id="fantaInfo"></div>
</div>

<div class="drink">
  <button onclick="eroga('lemon')">Lemon Soda</button>
  <div class="info" id="lemonInfo"></div>
</div>

<!-- ADMIN SOLO IN FONDO -->
<div id="adminMenu">
  <h3>Admin / Ricarica Lattine</h3>

  <select id="drinkSelect">
    <option value="monster">Monster</option>
    <option value="coca">Coca-Cola</option>
    <option value="fanta">Fanta</option>
    <option value="lemon">Lemon Soda</option>
  </select>

  <input type="number" id="qty" placeholder="Numero lattine" min="1">
  <input type="password" id="adminCode" placeholder="Codice admin">

  <button onclick="ricarica()">Ricarica</button>
</div>

<script>
/* CONFIG */
var portionML = 250;
var ADMIN_CODE = "SonoilBoss";

/* BEVANDE */
var drinks = {
  monster: { ml: 500, price: 3.00, cans: 0 },
  coca:    { ml: 330, price: 1.50, cans: 0 },
  fanta:   { ml: 330, price: 1.50, cans: 0 },
  lemon:   { ml: 330, price: 1.50, cans: 0 }
};

/* CALCOLI */
function portionsAvailable(d) {
  return Math.floor((drinks[d].cans * drinks[d].ml) / portionML);
}

function pricePerPortion(d) {
  return (drinks[d].price / Math.floor(drinks[d].ml / portionML)).toFixed(2);
}

/* UI */
function updateUI() {
  for (var d in drinks) {
    document.getElementById(d + "Info").innerHTML =
      "Lattine: " + drinks[d].cans +
      " – Porzioni disponibili: " + portionsAvailable(d) +
      " – €" + pricePerPortion(d) + " / 25cl";
  }
}

/* EROGA */
function eroga(d) {
  if (portionsAvailable(d) <= 0) {
    alert("Porzioni terminate");
    return;
  }
  drinks[d].cans -= portionML / drinks[d].ml;
  updateUI();
}

/* ADMIN */
function ricarica() {
  var code = document.getElementById("adminCode").value;
  var drink = document.getElementById("drinkSelect").value;
  var qty = parseInt(document.getElementById("qty").value);

  if (code !== ADMIN_CODE) {
    alert("Codice errato");
    return;
  }

  if (!qty || qty <= 0) {
    alert("Quantità non valida");
    return;
  }

  drinks[drink].cans += qty;
  updateUI();
  alert("Ricarica completata");
}

updateUI();
</script>

</body>
</html>
