<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Stube’s Studio</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #0d0d0d;
        color: #f7d778;
        margin: 0;
        padding: 0;
        text-align: center;
    }
    h1 {
        margin-top: 20px;
        font-size: 30px;
        color: #f7d778;
        text-shadow: 0 0 8px #ba9c45;
    }
    h3 {
        color: #f1d488;
        font-size: 17px;
        margin-bottom: 20px;
    }
    .container {
        width: 100%;
        max-width: 320px;
        margin: auto;
    }
    .drink {
        background: #1a1a1a;
        border: 2px solid #b6933c;
        border-radius: 12px;
        padding: 16px;
        margin: 14px;
        box-shadow: 0 0 8px rgba(255, 215, 0, 0.25);
    }
    .drink h2 {
        margin: 0 0 10px;
        font-size: 18px;
        color: #ffe9a3;
    }
    p {
        margin: 6px 0;
        font-size: 15px;
    }
    button {
        padding: 8px 16px;
        font-size: 15px;
        border: none;
        border-radius: 6px;
        background: linear-gradient(90deg, #b99324, #e8c15d);
        color: #000;
        cursor: pointer;
        font-weight: bold;
    }
    #ricaricaBox {
        display: none;
        margin: 15px;
        padding: 14px;
        background: #1a1a1a;
        border: 2px solid #b6933c;
        border-radius: 10px;
    }
    input, select {
        width: 90%;
        padding: 8px;
        margin-top: 6px;
        border-radius: 6px;
        border: 1px solid #b6933c;
        background: #111;
        color: #f7d778;
    }
    .zero {
        color: red !important;
        font-weight: bold;
    }
</style>
</head>

<body ontouchstart="">
<div class="container">

<h1>Stube’s Studio</h1>
<h3>Soldi spesi: € <span id="soldi">0.00</span></h3>

<div class="drink">
    <h2>Monster (1,49€)</h2>
    <p>Porzioni: <span id="monsterP">5</span></p>
    <button data-drink="monster" data-cost="1.49">Preleva 1 porzione (500 ml)</button>
</div>

<div class="drink">
    <h2>Fanta (0,70€)</h2>
    <p>Porzioni: <span id="fantaP">5</span></p>
    <button data-drink="fanta" data-cost="0.70">Preleva 1 porzione (500 ml)</button>
</div>

<div class="drink">
    <h2>Succoso (1,49€)</h2>
    <p>Porzioni: <span id="succosoP">5</span></p>
    <button data-drink="succoso" data-cost="1.49">Preleva 1 porzione (500 ml)</button>
</div>

<div class="drink">
    <h2>Lemonsoda (0,55€)</h2>
    <p>Porzioni: <span id="lemP">5</span></p>
    <button data-drink="lem" data-cost="0.55">Preleva 1 porzione (500 ml)</button>
</div>

<button id="ricBtn">Ricarica porzioni</button>

<div id="ricaricaBox">
    <input type="text" id="codice" placeholder="Codice">
    <select id="drinkSelect">
        <option value="monster">Monster</option>
        <option value="fanta">Fanta</option>
        <option value="succoso">Succoso</option>
        <option value="lem">Lemonsoda</option>
    </select>
    <input type="number" id="add" placeholder="Numero porzioni da aggiungere">
    <button id="addBtn">Aggiungi</button>
</div>

<audio id="suono">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_b5ebc9db56.mp3?filename=success-1-6297.mp3" type="audio/mpeg">
</audio>

</div>

<script>
let soldi = 0;
let suono = document.getElementById("suono");
let audioSbloccato = false;

// sblocco audio con primo tap
document.body.addEventListener("touchstart", function() {
  if (!audioSbloccato) {
    suono.play().catch(() => {});
    audioSbloccato = true;
  }
}, { once: true });

function aggiornaRosso(n) {
  let el = document.getElementById(n + "P");
  if (parseInt(el.textContent) <= 0) el.classList.add("zero");
  else el.classList.remove("zero");
}

document.querySelectorAll("button[data-drink]").forEach(btn => {
  btn.addEventListener("touchstart", function(){
    let nome = this.getAttribute("data-drink");
    let costo = parseFloat(this.getAttribute("data-cost"));
    let span = document.getElementById(nome + "P");
    let val = parseInt(span.textContent);
    if (val > 0) {
      span.textContent = val - 1;
      soldi -= costo;
      document.getElementById("soldi").textContent = soldi.toFixed(2);
      suono.play();
    }
    aggiornaRosso(nome);
  });
});

document.getElementById("ricBtn").addEventListener("touchstart", ()=>{
  let box = document.getElementById("ricaricaBox");
  box.style.display = box.style.display === "block" ? "none" : "block";
});

document.getElementById("addBtn").addEventListener("touchstart", ()=>{
  let codice = document.getElementById("codice").value;
  if (codice !== "SonoilBoss") return alert("Codice errato");
  let tipo = document.getElementById("drinkSelect").value;
  let aggiunta = parseInt(document.getElementById("add").value);
  if (!aggiunta) return alert("Numero non valido");
  let span = document.getElementById(tipo + "P");
  span.textContent = parseInt(span.textContent) + aggiunta;
  document.getElementById("codice").value = "";
  document.getElementById("add").value = "";
  aggiornaRosso(tipo);
});
</script>

</body>
</html>
